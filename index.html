<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your CO2 age - How much has atmospheric CO2 increased in your lifetime? </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(90deg, 
                #08306b 0%, #2171b5 10%, #4292c6 20%, #6baed6 30%, #9ecae1 40%, 
                #c6dbef 50%, #deebf7 60%, #fee0d2 70%, #fcbba1 80%, #fc9272 90%, 
                #fb6a4a 95%, #de2d26 100%);
            min-height: 100vh;
            color: #333;
        }

        .header {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            padding: 1rem 0;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: black;
            font-size: 2.5rem;
            font-weight: 300;
            margin-bottom: 0.5rem;
        }

        .header p {
            color: black;
            font-weight: 500;
            font-size: 1.1rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            min-height: 700px;
        }

        .chart-container svg {
            width: 100%;
            height: 700px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
        }

        .axis-label {
            font-size: 16px;
            font-family: 'Segoe UI', sans-serif;
            fill: #333;
            font-weight: 600;
        }

        .axis-title {
            font-size: 18px;
            font-family: 'Segoe UI', sans-serif;
            font-weight: 700;
            fill: #333;
        }

        .data-point {
            fill: #dc2626;
            opacity: 0.8;
            stroke: #b91c1c;
            stroke-width: 0.5;
        }

        .data-point:hover {
            opacity: 1;
            r: 3;
            stroke-width: 1;
        }

        .birth-marker {
            fill: #10b981;
            stroke: #059669;
            stroke-width: 3;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px 14px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            pointer-events: none;
            display: none;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .chart-title {
            text-align: center;
            margin-bottom: 1.5rem;
            color: #333;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .input-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .input-group {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }

        .input-field {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .input-field label {
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #555;
        }

        .input-field select {
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            min-width: 150px;
            transition: border-color 0.3s ease;
            background: white;
        }

        .input-field select:focus {
            outline: none;
            border-color: #667eea;
        }

        .special-note {
            background: linear-gradient(135deg, #2171b5 0%, #4292c6 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1rem 0;
            text-align: center;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .calculate-btn {
            background: linear-gradient(135deg, #de2d26 0%, #fb6a4a 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 15px rgba(222, 45, 38, 0.3);
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(222, 45, 38, 0.4);
        }

        .results {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .stats-grid-second {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 1rem;
        }

        .co2-age-banner {
            background: linear-gradient(135deg, #0c2340 0%, #1a365d 25%, #2d5a87 50%, #4facfe 75%, #00f2fe 100%);
            color: white;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.5);
            margin-bottom: 1.5rem;
            font-size: 2rem;
            font-weight: 700;
        }

        .co2-age-banner .age-value {
            font-size: 3rem;
            margin: 0.5rem 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .stat-card {
            color: white;
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-card.birth-co2 {
            background: linear-gradient(135deg, #0c2340 0%, #1a365d 25%, #2d5a87 50%, #4facfe 75%, #00f2fe 100%);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.5);
        }

        .stat-card.current-co2 {
            background: linear-gradient(135deg, #4a0e0e 0%, #7f1d1d 25%, #b91c1c 50%, #ff6b6b 75%, #ee5a52 100%);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.5);
        }

        .stat-card.increase-percent {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 20%, #fca5a5 40%, #f87171 60%, #ef4444 80%, #dc2626 100%);
            color: #7f1d1d;
            box-shadow: 0 8px 25px rgba(248, 113, 113, 0.3);
            font-weight: 700;
        }

        .stat-card.total-increase {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 20%, #bae6fd 40%, #7dd3fc 60%, #38bdf8 80%, #0ea5e9 100%);
            color: #0c4a6e;
            box-shadow: 0 8px 25px rgba(56, 189, 248, 0.3);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        .explanation {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .explanation h3 {
            color: #333;
            margin-bottom: 1rem;
        }

        .explanation p {
            margin-bottom: 1rem;
            color: #555;
        }

        .understanding-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .understanding-section h3 {
            color: #333;
            margin-bottom: 1rem;
        }

        .understanding-section p {
            margin-bottom: 1rem;
            color: #555;
        }

        .seasonal-cycle {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .seasonal-cycle h3 {
            color: #333;
            margin-bottom: 1rem;
        }

        .seasonal-cycle p {
            margin-bottom: 1rem;
            color: #555;
        }

        @media (max-width: 768px) {
            .input-group {
                flex-direction: column;
                align-items: center;
            }
            
            .input-field {
                margin: 0.5rem 0;
            }
            
            .input-field select {
                min-width: 200px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(1, 1fr);
            }

            .stats-grid-second {
                grid-template-columns: repeat(1, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Your CO<sub>2</sub> Age</h1>
        <p>Discover how atmospheric CO<sub>2</sub> has increased during your lifetime</p>
    </div>

    <div class="container">
        <div class="input-section">
            <h2 style="margin-bottom: 1.5rem; color: #333;">Enter your birth month and year</h2>
            <div class="input-group">
                <div class="input-field">
                    <label for="birthMonth">Birth Month</label>
                    <select id="birthMonth">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11" selected>November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                <div class="input-field">
                    <label for="birthYear">Birth Year</label>
                    <select id="birthYear">
                        <option value="1900">1900</option>
                        <option value="1901">1901</option>
                        <option value="1902">1902</option>
                        <option value="1903">1903</option>
                        <option value="1904">1904</option>
                        <option value="1905">1905</option>
                        <option value="1906">1906</option>
                        <option value="1907">1907</option>
                        <option value="1908">1908</option>
                        <option value="1909">1909</option>
                        <option value="1910">1910</option>
                        <option value="1911">1911</option>
                        <option value="1912">1912</option>
                        <option value="1913">1913</option>
                        <option value="1914">1914</option>
                        <option value="1915">1915</option>
                        <option value="1916">1916</option>
                        <option value="1917">1917</option>
                        <option value="1918">1918</option>
                        <option value="1919">1919</option>
                        <option value="1920">1920</option>
                        <option value="1921">1921</option>
                        <option value="1922">1922</option>
                        <option value="1923">1923</option>
                        <option value="1924">1924</option>
                        <option value="1925">1925</option>
                        <option value="1926">1926</option>
                        <option value="1927">1927</option>
                        <option value="1928">1928</option>
                        <option value="1929">1929</option>
                        <option value="1930">1930</option>
                        <option value="1931">1931</option>
                        <option value="1932">1932</option>
                        <option value="1933">1933</option>
                        <option value="1934">1934</option>
                        <option value="1935">1935</option>
                        <option value="1936">1936</option>
                        <option value="1937">1937</option>
                        <option value="1938">1938</option>
                        <option value="1939">1939</option>
                        <option value="1940">1940</option>
                        <option value="1941">1941</option>
                        <option value="1942">1942</option>
                        <option value="1943">1943</option>
                        <option value="1944">1944</option>
                        <option value="1945">1945</option>
                        <option value="1946">1946</option>
                        <option value="1947">1947</option>
                        <option value="1948">1948</option>
                        <option value="1949">1949</option>
                        <option value="1950">1950</option>
                        <option value="1951">1951</option>
                        <option value="1952">1952</option>
                        <option value="1953">1953</option>
                        <option value="1954">1954</option>
                        <option value="1955">1955</option>
                        <option value="1956">1956</option>
                        <option value="1957">1957</option>
                        <option value="1958">1958</option>
                        <option value="1959">1959</option>
                        <option value="1960">1960</option>
                        <option value="1961">1961</option>
                        <option value="1962">1962</option>
                        <option value="1963">1963</option>
                        <option value="1964">1964</option>
                        <option value="1965">1965</option>
                        <option value="1966">1966</option>
                        <option value="1967">1967</option>
                        <option value="1968">1968</option>
                        <option value="1969">1969</option>
                        <option value="1970">1970</option>
                        <option value="1971">1971</option>
                        <option value="1972">1972</option>
                        <option value="1973">1973</option>
                        <option value="1974">1974</option>
                        <option value="1975">1975</option>
                        <option value="1976">1976</option>
                        <option value="1977">1977</option>
                        <option value="1978">1978</option>
                        <option value="1979">1979</option>
                        <option value="1980">1980</option>
                        <option value="1981">1981</option>
                        <option value="1982">1982</option>
                        <option value="1983">1983</option>
                        <option value="1984">1984</option>
                        <option value="1985">1985</option>
                        <option value="1986">1986</option>
                        <option value="1987">1987</option>
                        <option value="1988">1988</option>
                        <option value="1989">1989</option>
                        <option value="1990">1990</option>
                        <option value="1991">1991</option>
                        <option value="1992">1992</option>
                        <option value="1993" selected>1993</option>
                        <option value="1994">1994</option>
                        <option value="1995">1995</option>
                        <option value="1996">1996</option>
                        <option value="1997">1997</option>
                        <option value="1998">1998</option>
                        <option value="1999">1999</option>
                        <option value="2000">2000</option>
                        <option value="2001">2001</option>
                        <option value="2002">2002</option>
                        <option value="2003">2003</option>
                        <option value="2004">2004</option>
                        <option value="2005">2005</option>
                        <option value="2006">2006</option>
                        <option value="2007">2007</option>
                        <option value="2008">2008</option>
                        <option value="2009">2009</option>
                        <option value="2010">2010</option>
                        <option value="2011">2011</option>
                        <option value="2012">2012</option>
                        <option value="2013">2013</option>
                        <option value="2014">2014</option>
                        <option value="2015">2015</option>
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                        <option value="2019">2019</option>
                        <option value="2020">2020</option>
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                    </select>
                </div>
            </div>
            <button class="calculate-btn" onclick="calculateCO2Age()">Calculate My CO<sub>2</sub> Age</button>
        </div>

        <div class="results" id="results">
            <div id="specialNote" class="special-note" style="display: none;">
                🎉 Congratulations! You are older than the oldest continuous CO<sub>2</sub> records at Mauna Loa Observatory! We will need to turn to a different CO<sub>2</sub> record to calculate your CO<sub>2</sub> age. 
            </div>

            <div id="iceCoreBanner" class="special-note" style="display: none; background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);">
                🎉 Congratulations! You are older than the longest continuous record of atmospheric CO<sub>2</sub> from Mauna Loa, Hawaii. ❄️ Your CO<sub>2</sub> age is based on Antarctic ice core data, which provides a record of past CO<sub>2</sub> levels from air bubbles trapped in the ice.
            </div>
            
            <div class="co2-age-banner" id="co2AgeBanner" style="display: none;">
                <div>Your CO<sub>2</sub> Age is:</div>
                <div class="age-value" id="co2AgeValue">- ppm</div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card birth-co2">
                    <div class="stat-value" id="birthCO2Display">-</div>
                    <div class="stat-label" id="birthLabel">CO<sub>2</sub> at Birth (ppm)</div>
                </div>
                <div class="stat-card current-co2">
                    <div class="stat-value" id="currentCO2Display">-</div>
                    <div class="stat-label">Current CO<sub>2</sub> (ppm)</div>
                </div>
            </div>

            <div class="stats-grid-second">
                <div class="stat-card total-increase">
                    <div class="stat-value" id="totalIncreaseDisplay">-</div>
                    <div class="stat-label">Total CO<sub>2</sub> Increase (ppm)</div>
                </div>
                <div class="stat-card increase-percent">
                    <div class="stat-value" id="increasePercentDisplay">-</div>
                    <div class="stat-label">Percent Increase (%)</div>
                </div>
            </div>
        </div>

        <!-- Simple SVG Scatter Plot -->
        <div class="chart-container">
            <div class="chart-title">Atmospheric CO<sub>2</sub> since 1958 - The Keeling Curve</div>
            <svg id="co2Chart"></svg>
            <div id="tooltip" class="tooltip"></div>
        </div>

        <div class="understanding-section">
            <h3>Understanding Your CO<sub>2</sub> Age</h3>
            <p>Your "CO<sub>2</sub> age" represents how much atmospheric carbon dioxide has increased during your lifetime. This metric helps put climate change into personal perspective by contextualizing the rapid global CO<sub>2</sub> increase that has occurred during your lifetime. </p>
                        
            <p>When you were born, the atmosphere contained a specific concentration of CO<sub>2</sub>, measured in parts per million (ppm). Since then, human activities - primarily fossil fuel burning - have added more and more CO<sub>2</sub> to the atmosphere. Your CO<sub>2</sub> age represents the total increase in CO<sub>2</sub> concentration that has occurred during your lifetime, providing a personal reference point to the global CO<sub>2</sub> increase you've witnessed. </p>
            
            <p>This increase isn't just a number - it represents a fundamental shift in our planet's atmospheric composition that affects global temperatures, weather patterns, precipitation, global ecosystems, and even human health. By understanding your personal CO<sub>2</sub> age, you can better appreciate the scale and rate at which atmospheric CO<sub>2</sub> has increased in your few short years on Earth. </p>

            <p><strong>🌍 </strong> CO<sub>2</sub> age is not a one-to-one function — you may share the same CO<sub>2</sub> age as someone born in a different year, uniting us across generations in our shared climate-CO<sub>2</sub> trajectory. Due to the seasonal fluctuations in atmospheric CO<sub>2</sub>, people born months or even years apart can have similar CO<sub>2</sub> ages.</p>
        </div>

        <div class="seasonal-cycle">
            <h3>Understanding the Seasonal CO<sub>2</sub> Cycle</h3>
            <p>The Keeling Curve shows a distinctive sinusoidal or "sawtooth" pattern with regular peaks and troughs each year, on top of a steadily increasing baseline. This seasonal cycle is driven by the annual cycle in plant respiration in the Northern Hemisphere, where most of Earth's terrestrial biomass is located. </p>
            
            <p><strong>Spring and Summer (CO<sub>2</sub> decreases):</strong> As plants photosynthesize and grow, they absorb large amounts of CO<sub>2</sub> from the atmosphere and convert it into organic biomass. This natural process temporarily reduces atmospheric CO<sub>2</sub> concentrations, leading to the annual minimum typically observed in late summer.</p>
            
            <p><strong>Fall and Winter (CO<sub>2</sub> increases):</strong> When plants decompose and respire, or when they reduce photosynthesis during winter months, plant respiration and microbial decomposition release stored carbon back to the atmosphere as CO<sub>2</sub>. This leads to the annual maximum typically observed in late winter or early spring.</p>
            
            <p>The seasonal amplitude of this natural "Earth breathing" cycle has been increasing over recent decades as atmospheric CO<sub>2</sub> levels rise and plant growing seasons change due to climate change. This expanding range demonstrates how Earth's ecosystems are responding to our changing atmosphere. </p>
        </div>

        <div class="explanation">
            <h3>About the Keeling Curve and CO<sub>2</sub> Monitoring</h3>
            <p>The Keeling Curve is a graph of the annual variation and overall accumulation of carbon dioxide in Earth's atmosphere based on continuous measurements taken at the Mauna Loa Observatory in Hawaii from 1958 to the present day. </p>
                
            <p>The curve is named after scientist Dr. Charles David Keeling, who started the atmospheric monitoring program and supervised it until his death in 2005. The program has been continued under the leadership of Dr. Charles Keeling's son, Dr. Ralph F. Keeling with support from the U.S. National Science Foundation and National Oceanic and Atmospheric Administration. Keeling's measurements showed the first significant evidence of rapidly increasing carbon dioxide (CO<sub>2</sub>) levels in the atmosphere. Many scientists credit the Keeling curve with first bringing the world's attention to the current increase of CO<sub>2</sub> in the atmosphere.</p>
            
            <h3>Current Data Sources</h3>
            <p>Today's atmospheric CO<sub>2</sub> measurements come from two primary sources working in parallel:</p>
            
            <p><strong>NOAA Global Monitoring Laboratory:</strong> NOAA GML conducts research on greenhouse gas and carbon cycle feedbacks, changes in aerosols, and surface radiation, and recovery of stratospheric ozone. Their Mauna Loa CO<sub>2</sub> measurements provide the official reference data used by climate scientists worldwide.</p>
            
            <p><strong>Scripps Institution of Oceanography:</strong> The original Keeling program continues under Ralph Keeling's direction, providing independent verification and additional scientific analysis of atmospheric CO<sub>2</sub> trends and seasonal patterns.</p>
            
            <h3>Historical Context and Significance</h3>
            <p>Mauna Loa was chosen as a long-term monitoring site due to its remote location, isolation from anthropogenic activities, and its lack of vegetation. </p>
            
            <p>The measurements collected at Mauna Loa Observatory show a steady increase in mean atmospheric CO<sub>2</sub> concentration from 313 ppm in March 1958 to 428 ppm in July 2025. The amount of carbon dioxide in the atmosphere has risen more than 50 percent since humans began burning fossil fuels for energy.</p>
            
            <h3>Additional Resources</h3>
            <p>For the most up-to-date CO<sub>2</sub> measurements, scientific analyses, and comprehensive historical data, visit:</p>
            <ul style="margin-left: 2rem; margin-bottom: 1rem;">
                <li><strong>Scripps CO<sub>2</sub> Program:</strong> <a href="https://scrippsco2.ucsd.edu" target="_blank" style="color: #de2d26; text-decoration: none; font-weight: 600;">scrippsco2.ucsd.edu</a></li>
                <li><strong>NOAA Trends in CO<sub>2</sub>:</strong> <a href="https://gml.noaa.gov/ccgg/trends/mlo.html" target="_blank" style="color: #de2d26; text-decoration: none; font-weight: 600;">gml.noaa.gov/ccgg/trends/mlo.html</a></li>
                <li><strong>Keeling Curve:</strong> <a href="https://keelingcurve.ucsd.edu" target="_blank" style="color: #de2d26; text-decoration: none; font-weight: 600;">keelingcurve.ucsd.edu</a></li>
            </ul>
            <p>These sites provide real-time data updates, research publications, and additional educational resources about atmospheric CO<sub>2</sub> monitoring.</p>
        </div>
    </div>

    <script>
        // Complete CO2 data with monthly measurements for every year from 1958-2025
        // and annual ice core data for 1900-1957
        const co2Data = {
            // Ice core data (annual averages) 1900-1957 - NASA GISS data
            1900: [295.7, 295.7, 295.7, 295.7, 295.7, 295.7, 295.7, 295.7, 295.7, 295.7, 295.7, 295.7],
            1901: [296.2, 296.2, 296.2, 296.2, 296.2, 296.2, 296.2, 296.2, 296.2, 296.2, 296.2, 296.2],
            1902: [296.6, 296.6, 296.6, 296.6, 296.6, 296.6, 296.6, 296.6, 296.6, 296.6, 296.6, 296.6],
            1903: [297.0, 297.0, 297.0, 297.0, 297.0, 297.0, 297.0, 297.0, 297.0, 297.0, 297.0, 297.0],
            1904: [297.5, 297.5, 297.5, 297.5, 297.5, 297.5, 297.5, 297.5, 297.5, 297.5, 297.5, 297.5],
            1905: [298.0, 298.0, 298.0, 298.0, 298.0, 298.0, 298.0, 298.0, 298.0, 298.0, 298.0, 298.0],
            1906: [298.4, 298.4, 298.4, 298.4, 298.4, 298.4, 298.4, 298.4, 298.4, 298.4, 298.4, 298.4],
            1907: [298.8, 298.8, 298.8, 298.8, 298.8, 298.8, 298.8, 298.8, 298.8, 298.8, 298.8, 298.8],
            1908: [299.3, 299.3, 299.3, 299.3, 299.3, 299.3, 299.3, 299.3, 299.3, 299.3, 299.3, 299.3],
            1909: [299.7, 299.7, 299.7, 299.7, 299.7, 299.7, 299.7, 299.7, 299.7, 299.7, 299.7, 299.7],
            1910: [300.1, 300.1, 300.1, 300.1, 300.1, 300.1, 300.1, 300.1, 300.1, 300.1, 300.1, 300.1],
            1911: [300.6, 300.6, 300.6, 300.6, 300.6, 300.6, 300.6, 300.6, 300.6, 300.6, 300.6, 300.6],
            1912: [301.0, 301.0, 301.0, 301.0, 301.0, 301.0, 301.0, 301.0, 301.0, 301.0, 301.0, 301.0],
            1913: [301.3, 301.3, 301.3, 301.3, 301.3, 301.3, 301.3, 301.3, 301.3, 301.3, 301.3, 301.3],
            1914: [301.4, 301.4, 301.4, 301.4, 301.4, 301.4, 301.4, 301.4, 301.4, 301.4, 301.4, 301.4],
            1915: [301.6, 301.6, 301.6, 301.6, 301.6, 301.6, 301.6, 301.6, 301.6, 301.6, 301.6, 301.6],
            1916: [302.0, 302.0, 302.0, 302.0, 302.0, 302.0, 302.0, 302.0, 302.0, 302.0, 302.0, 302.0],
            1917: [302.4, 302.4, 302.4, 302.4, 302.4, 302.4, 302.4, 302.4, 302.4, 302.4, 302.4, 302.4],
            1918: [302.8, 302.8, 302.8, 302.8, 302.8, 302.8, 302.8, 302.8, 302.8, 302.8, 302.8, 302.8],
            1919: [303.0, 303.0, 303.0, 303.0, 303.0, 303.0, 303.0, 303.0, 303.0, 303.0, 303.0, 303.0],
            1920: [303.4, 303.4, 303.4, 303.4, 303.4, 303.4, 303.4, 303.4, 303.4, 303.4, 303.4, 303.4],
            1921: [303.7, 303.7, 303.7, 303.7, 303.7, 303.7, 303.7, 303.7, 303.7, 303.7, 303.7, 303.7],
            1922: [304.1, 304.1, 304.1, 304.1, 304.1, 304.1, 304.1, 304.1, 304.1, 304.1, 304.1, 304.1],
            1923: [304.5, 304.5, 304.5, 304.5, 304.5, 304.5, 304.5, 304.5, 304.5, 304.5, 304.5, 304.5],
            1924: [304.9, 304.9, 304.9, 304.9, 304.9, 304.9, 304.9, 304.9, 304.9, 304.9, 304.9, 304.9],
            1925: [305.3, 305.3, 305.3, 305.3, 305.3, 305.3, 305.3, 305.3, 305.3, 305.3, 305.3, 305.3],
            1926: [305.8, 305.8, 305.8, 305.8, 305.8, 305.8, 305.8, 305.8, 305.8, 305.8, 305.8, 305.8],
            1927: [306.2, 306.2, 306.2, 306.2, 306.2, 306.2, 306.2, 306.2, 306.2, 306.2, 306.2, 306.2],
            1928: [306.6, 306.6, 306.6, 306.6, 306.6, 306.6, 306.6, 306.6, 306.6, 306.6, 306.6, 306.6],
            1929: [307.2, 307.2, 307.2, 307.2, 307.2, 307.2, 307.2, 307.2, 307.2, 307.2, 307.2, 307.2],
            1930: [307.5, 307.5, 307.5, 307.5, 307.5, 307.5, 307.5, 307.5, 307.5, 307.5, 307.5, 307.5],
            1931: [308.0, 308.0, 308.0, 308.0, 308.0, 308.0, 308.0, 308.0, 308.0, 308.0, 308.0, 308.0],
            1932: [308.3, 308.3, 308.3, 308.3, 308.3, 308.3, 308.3, 308.3, 308.3, 308.3, 308.3, 308.3],
            1933: [308.9, 308.9, 308.9, 308.9, 308.9, 308.9, 308.9, 308.9, 308.9, 308.9, 308.9, 308.9],
            1934: [309.3, 309.3, 309.3, 309.3, 309.3, 309.3, 309.3, 309.3, 309.3, 309.3, 309.3, 309.3],
            1935: [309.7, 309.7, 309.7, 309.7, 309.7, 309.7, 309.7, 309.7, 309.7, 309.7, 309.7, 309.7],
            1936: [310.1, 310.1, 310.1, 310.1, 310.1, 310.1, 310.1, 310.1, 310.1, 310.1, 310.1, 310.1],
            1937: [310.6, 310.6, 310.6, 310.6, 310.6, 310.6, 310.6, 310.6, 310.6, 310.6, 310.6, 310.6],
            1938: [311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0],
            1939: [311.2, 311.2, 311.2, 311.2, 311.2, 311.2, 311.2, 311.2, 311.2, 311.2, 311.2, 311.2],
            1940: [311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3],
            1941: [311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0, 311.0],
            1942: [310.7, 310.7, 310.7, 310.7, 310.7, 310.7, 310.7, 310.7, 310.7, 310.7, 310.7, 310.7],
            1943: [310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5],
            1944: [310.2, 310.2, 310.2, 310.2, 310.2, 310.2, 310.2, 310.2, 310.2, 310.2, 310.2, 310.2],
            1945: [310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3],
            1946: [310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3, 310.3],
            1947: [310.4, 310.4, 310.4, 310.4, 310.4, 310.4, 310.4, 310.4, 310.4, 310.4, 310.4, 310.4],
            1948: [310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5, 310.5],
            1949: [310.9, 310.9, 310.9, 310.9, 310.9, 310.9, 310.9, 310.9, 310.9, 310.9, 310.9, 310.9],
            1950: [311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3, 311.3],
            1951: [311.8, 311.8, 311.8, 311.8, 311.8, 311.8, 311.8, 311.8, 311.8, 311.8, 311.8, 311.8],
            1952: [312.2, 312.2, 312.2, 312.2, 312.2, 312.2, 312.2, 312.2, 312.2, 312.2, 312.2, 312.2],
            1953: [312.6, 312.6, 312.6, 312.6, 312.6, 312.6, 312.6, 312.6, 312.6, 312.6, 312.6, 312.6],
            1954: [313.2, 313.2, 313.2, 313.2, 313.2, 313.2, 313.2, 313.2, 313.2, 313.2, 313.2, 313.2],
            1955: [313.7, 313.7, 313.7, 313.7, 313.7, 313.7, 313.7, 313.7, 313.7, 313.7, 313.7, 313.7],
            1956: [314.3, 314.3, 314.3, 314.3, 314.3, 314.3, 314.3, 314.3, 314.3, 314.3, 314.3, 314.3],
            1957: [314.8, 314.8, 314.8, 314.8, 314.8, 314.8, 314.8, 314.8, 314.8, 314.8, 314.8, 314.8],
            // Mauna Loa data (monthly measurements) 1958-2025
            1958: [315.71, 315.71, 315.71, 317.45, 317.51, 317.27, 315.87, 314.93, 313.21, 312.42, 313.33, 314.67],
            1959: [315.58, 316.49, 316.65, 317.72, 318.29, 318.15, 316.54, 314.80, 313.84, 313.33, 314.81, 315.58],
            1960: [316.43, 316.98, 317.58, 319.03, 320.03, 319.58, 318.18, 315.90, 314.17, 313.83, 315.00, 316.19],
            1961: [316.89, 317.70, 318.54, 319.48, 320.58, 319.77, 318.56, 316.79, 314.99, 315.31, 316.10, 317.01],
            1962: [317.94, 318.55, 319.68, 320.57, 321.02, 320.62, 319.61, 317.40, 316.24, 315.42, 316.69, 317.70],
            1963: [318.74, 319.07, 319.86, 321.38, 322.24, 321.49, 319.74, 317.77, 316.21, 315.99, 317.07, 318.35],
            1964: [319.57, 320.04, 320.75, 321.84, 322.25, 321.89, 320.44, 318.69, 316.71, 316.87, 317.68, 318.71],
            1965: [319.44, 320.44, 320.89, 322.14, 322.17, 321.87, 321.21, 318.87, 317.82, 317.30, 318.87, 319.42],
            1966: [320.62, 321.60, 322.39, 323.70, 324.08, 323.75, 322.37, 320.36, 318.64, 318.10, 319.78, 321.02],
            1967: [322.33, 322.50, 323.03, 324.41, 325.00, 324.09, 322.54, 320.92, 319.25, 319.39, 320.73, 321.96],
            1968: [322.57, 323.15, 323.89, 325.02, 325.57, 325.36, 324.14, 322.11, 320.33, 320.25, 321.32, 322.89],
            1969: [324.00, 324.41, 325.63, 326.66, 327.38, 326.71, 325.88, 323.66, 322.38, 321.78, 322.85, 324.11],
            1970: [325.06, 325.99, 326.93, 328.13, 328.08, 327.67, 326.34, 324.68, 323.10, 323.06, 324.01, 325.13],
            1971: [326.17, 326.69, 327.18, 327.78, 328.93, 328.57, 327.36, 325.43, 323.36, 323.56, 324.80, 326.01],
            1972: [326.77, 327.63, 327.75, 329.72, 330.07, 329.09, 328.04, 326.32, 324.84, 325.20, 326.50, 327.55],
            1973: [328.55, 329.57, 330.30, 331.50, 332.48, 332.07, 330.87, 329.31, 327.52, 327.19, 328.17, 328.65],
            1974: [329.36, 330.71, 331.49, 332.65, 333.19, 332.20, 331.07, 329.15, 327.33, 327.28, 328.31, 329.58],
            1975: [330.73, 331.46, 331.94, 333.11, 333.95, 333.42, 331.97, 329.95, 328.49, 328.36, 329.38, 330.78],
            1976: [331.56, 332.74, 333.36, 334.74, 334.72, 333.97, 333.08, 330.68, 328.96, 328.72, 330.16, 331.62],
            1977: [332.68, 333.17, 334.96, 336.14, 336.93, 336.17, 334.89, 332.56, 331.29, 331.28, 332.46, 333.60],
            1978: [334.94, 335.26, 336.66, 337.69, 338.02, 338.01, 336.50, 334.42, 332.36, 332.45, 333.76, 334.91],
            1979: [336.14, 336.69, 338.27, 338.82, 339.24, 339.26, 337.54, 335.72, 333.97, 334.24, 335.32, 336.81],
            1980: [337.90, 338.34, 340.07, 340.93, 341.45, 341.36, 339.45, 337.67, 336.25, 336.14, 337.30, 338.29],
            1981: [339.29, 340.55, 341.63, 342.60, 343.04, 342.54, 340.82, 338.48, 336.95, 337.05, 338.58, 339.91],
            1982: [340.93, 341.76, 342.78, 343.96, 344.77, 343.88, 342.42, 340.24, 338.37, 338.41, 339.44, 340.78],
            1983: [341.57, 342.79, 343.37, 345.40, 346.14, 345.76, 344.32, 342.51, 340.46, 340.53, 341.79, 343.20],
            1984: [344.21, 344.92, 345.68, 347.38, 347.77, 347.16, 345.79, 343.74, 341.59, 341.86, 343.31, 345.00],
            1985: [345.48, 346.41, 347.91, 348.66, 349.28, 348.65, 346.90, 345.26, 343.47, 343.35, 344.73, 346.12],
            1986: [346.78, 347.48, 348.25, 349.86, 350.52, 349.98, 348.25, 346.17, 345.48, 344.82, 346.22, 347.48],
            1987: [348.73, 348.92, 349.81, 351.40, 352.15, 351.58, 350.21, 348.20, 346.66, 346.72, 348.08, 349.28],
            1988: [350.51, 351.70, 352.50, 353.67, 354.35, 353.88, 352.80, 350.49, 348.97, 349.37, 350.42, 351.62],
            1989: [353.07, 353.43, 354.08, 355.72, 355.95, 355.44, 354.05, 351.84, 350.09, 350.33, 351.55, 352.91],
            1990: [353.86, 355.10, 355.75, 356.38, 357.38, 356.39, 354.89, 353.06, 351.38, 351.69, 353.14, 354.41],
            1991: [354.93, 355.82, 357.33, 358.77, 359.23, 358.23, 356.30, 353.97, 352.34, 352.43, 353.89, 355.21],
            1992: [356.34, 357.21, 357.97, 359.22, 359.71, 359.44, 357.15, 354.99, 353.01, 353.41, 354.42, 355.68],
            1993: [357.10, 357.42, 358.59, 359.39, 360.30, 359.64, 357.45, 355.76, 354.14, 354.23, 355.53, 357.03],
            1994: [358.36, 359.04, 360.11, 361.36, 361.78, 360.94, 359.51, 357.59, 355.86, 356.21, 357.65, 359.10],
            1995: [360.04, 361.00, 361.98, 363.44, 363.83, 363.33, 361.78, 359.33, 358.32, 358.14, 359.61, 360.82],
            1996: [362.20, 363.36, 364.28, 364.69, 365.25, 365.06, 363.69, 361.55, 359.69, 359.72, 361.04, 362.39],
            1997: [363.24, 364.21, 364.65, 366.49, 366.77, 365.73, 364.46, 362.40, 360.44, 360.97, 362.65, 364.51],
            1998: [365.39, 366.10, 367.36, 368.79, 369.56, 369.13, 367.98, 366.10, 364.16, 364.54, 365.67, 367.30],
            1999: [368.35, 369.28, 369.84, 371.15, 371.12, 370.46, 369.61, 367.06, 364.95, 365.52, 366.88, 368.26],
            2000: [369.45, 369.71, 370.75, 371.98, 371.75, 371.87, 370.02, 368.27, 367.15, 367.18, 368.53, 369.83],
            2001: [370.76, 371.69, 372.63, 373.55, 374.03, 373.40, 371.68, 369.78, 368.34, 368.61, 369.94, 371.42],
            2002: [372.70, 373.37, 374.30, 375.19, 375.93, 375.69, 374.16, 372.03, 370.92, 370.73, 372.43, 373.98],
            2003: [375.07, 375.82, 376.64, 377.92, 378.78, 378.46, 376.88, 374.57, 373.34, 373.31, 374.84, 376.17],
            2004: [377.17, 378.05, 379.06, 380.54, 380.80, 379.87, 377.65, 376.17, 374.43, 374.63, 376.33, 377.68],
            2005: [378.63, 379.91, 380.95, 382.48, 382.64, 382.40, 380.93, 378.93, 376.89, 377.19, 378.54, 380.31],
            2006: [381.58, 382.40, 382.86, 384.80, 385.22, 384.24, 382.65, 380.60, 379.04, 379.33, 380.35, 382.02],
            2007: [383.10, 384.12, 384.81, 386.73, 386.78, 386.33, 384.73, 382.24, 381.20, 381.37, 382.70, 384.19],
            2008: [385.78, 386.06, 386.28, 387.33, 388.78, 387.99, 386.62, 384.32, 383.41, 383.22, 384.41, 385.79],
            2009: [387.17, 387.70, 389.04, 389.76, 390.36, 389.70, 388.24, 386.29, 384.95, 384.64, 386.23, 387.63],
            2010: [388.91, 390.41, 391.37, 392.67, 393.21, 392.38, 390.41, 388.54, 387.03, 387.43, 388.87, 389.99],
            2011: [391.50, 392.05, 392.80, 393.44, 394.41, 393.95, 392.72, 390.33, 389.28, 389.19, 390.48, 392.06],
            2012: [393.31, 394.04, 394.59, 396.38, 396.93, 395.91, 394.56, 392.59, 391.32, 391.27, 393.20, 394.57],
            2013: [395.78, 397.03, 397.66, 398.64, 400.02, 398.81, 397.51, 395.39, 393.72, 393.90, 395.36, 397.03],
            2014: [398.04, 398.27, 399.91, 401.51, 401.96, 401.43, 399.27, 397.18, 395.54, 396.16, 397.40, 399.08],
            2015: [400.18, 400.55, 401.74, 403.35, 404.15, 402.97, 401.46, 399.11, 397.82, 398.49, 400.27, 402.06],
            2016: [402.73, 404.25, 405.06, 407.60, 407.90, 406.99, 404.59, 402.45, 401.23, 401.79, 403.72, 404.64],
            2017: [406.36, 406.65, 407.54, 409.22, 409.89, 409.08, 407.33, 405.32, 403.57, 403.82, 405.31, 407.00],
            2018: [408.15, 408.52, 409.59, 410.45, 411.44, 410.99, 408.90, 407.16, 405.71, 406.19, 408.21, 409.27],
            2019: [411.03, 411.96, 412.18, 413.54, 414.86, 414.15, 411.96, 410.17, 408.76, 408.74, 410.47, 411.97],
            2020: [413.59, 414.32, 414.72, 416.42, 417.28, 416.58, 414.58, 412.76, 411.50, 411.49, 413.10, 414.23],
            2021: [415.49, 416.72, 417.61, 419.01, 419.09, 418.93, 416.90, 414.42, 413.26, 413.90, 414.97, 416.67],
            2022: [418.13, 419.24, 418.76, 420.19, 420.97, 420.94, 418.85, 417.15, 415.91, 415.74, 417.47, 418.99],
            2023: [419.47, 420.31, 420.99, 423.31, 424.00, 423.68, 421.83, 419.68, 418.50, 418.82, 420.46, 421.86],
            2024: [422.80, 424.55, 425.38, 426.51, 426.90, 426.91, 425.55, 422.99, 422.03, 422.38, 423.85, 425.40],
            2025: [426.65, 427.09, 428.15, 429.64, 430.51, 429.61, 427.87, 427.87, 427.87, 427.87, 427.87, 427.87]
        };

        let userBirthYear = null;
        let userBirthMonth = null;
        let userBirthCO2 = null;

        // Create simple scatter plot using SVG
        function createScatterPlot() {
            const svg = document.getElementById('co2Chart');
            const tooltip = document.getElementById('tooltip');
            
            // Clear existing content
            svg.innerHTML = '';
            
            // SVG dimensions
            const margin = {top: 20, right: 30, bottom: 80, left: 100};
            const width = 800 - margin.left - margin.right;
            const height = 700 - margin.top - margin.bottom;
            
            // Set SVG dimensions
            svg.setAttribute('viewBox', `0 0 800 700`);
            
            // Generate all data points
            const allData = [];
            for (let year = 1958; year <= 2025; year++) {
                for (let month = 1; month <= 12; month++) {
                    if (year === 2025 && month > 7) break; // Only data through July 2025
                    
                    const co2Value = co2Data[year][month - 1];
                    allData.push({
                        date: new Date(year, month - 1, 1),
                        year: year,
                        month: month,
                        co2: co2Value,
                        x: year + (month - 1) / 12 // Decimal year for plotting
                    });
                }
            }
            
            // Calculate scales
            const xMin = 1955;
            const xMax = 2030;
            const yMin = 275;
            const yMax = 440;
            
            // Scale functions
            const xScale = (x) => margin.left + ((x - xMin) / (xMax - xMin)) * width;
            const yScale = (y) => height + margin.top - ((y - yMin) / (yMax - yMin)) * height;
            
            // Create background
            const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            rect.setAttribute('x', margin.left);
            rect.setAttribute('y', margin.top);
            rect.setAttribute('width', width);
            rect.setAttribute('height', height);
            rect.setAttribute('fill', '#fafafa');
            rect.setAttribute('stroke', '#e0e0e0');
            rect.setAttribute('stroke-width', '2');
            svg.appendChild(rect);
            
            // Create grid lines
            for (let year = 1955; year <= 2030; year += 5) {
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', xScale(year));
                line.setAttribute('y1', margin.top);
                line.setAttribute('x2', xScale(year));
                line.setAttribute('y2', margin.top + height);
                line.setAttribute('stroke', '#d0d0d0');
                line.setAttribute('stroke-width', '1');
                svg.appendChild(line);
            }
            
            for (let co2 = 280; co2 <= 440; co2 += 20) {
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', margin.left);
                line.setAttribute('y1', yScale(co2));
                line.setAttribute('x2', margin.left + width);
                line.setAttribute('y2', yScale(co2));
                line.setAttribute('stroke', '#d0d0d0');
                line.setAttribute('stroke-width', '1');
                svg.appendChild(line);
            }
            
            // Add pre-industrial CO2 reference line (280 ppm)
            const preIndustrialLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            preIndustrialLine.setAttribute('x1', margin.left);
            preIndustrialLine.setAttribute('y1', yScale(280));
            preIndustrialLine.setAttribute('x2', margin.left + width);
            preIndustrialLine.setAttribute('y2', yScale(280));
            preIndustrialLine.setAttribute('stroke', '#666');
            preIndustrialLine.setAttribute('stroke-width', '2');
            preIndustrialLine.setAttribute('stroke-dasharray', '10,5');
            svg.appendChild(preIndustrialLine);
            
            // Add pre-industrial label
            const preIndustrialLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            preIndustrialLabel.setAttribute('x', margin.left + width - 10);
            preIndustrialLabel.setAttribute('y', yScale(280) - 8);
            preIndustrialLabel.setAttribute('text-anchor', 'end');
            preIndustrialLabel.setAttribute('class', 'axis-label');
            preIndustrialLabel.setAttribute('fill', '#666');
            preIndustrialLabel.textContent = 'Pre-Industrial CO₂ levels (280 ppm)';
            svg.appendChild(preIndustrialLabel);
            
            // Plot data points
            allData.forEach((d) => {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', xScale(d.x));
                circle.setAttribute('cy', yScale(d.co2));
                circle.setAttribute('r', '2');
                circle.setAttribute('class', 'data-point');
                
                // Add hover effects
                circle.addEventListener('mouseenter', (e) => {
                    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                                     'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                    tooltip.innerHTML = `${monthNames[d.month-1]} ${d.year}: ${d.co2.toFixed(2)} ppm`;
                    tooltip.style.display = 'block';
                    tooltip.style.left = (e.pageX + 10) + 'px';
                    tooltip.style.top = (e.pageY - 10) + 'px';
                });
                
                circle.addEventListener('mouseleave', () => {
                    tooltip.style.display = 'none';
                });
                
                svg.appendChild(circle);
            });
            
            // Add axes
            const xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            xAxis.setAttribute('x1', margin.left);
            xAxis.setAttribute('y1', margin.top + height);
            xAxis.setAttribute('x2', margin.left + width);
            xAxis.setAttribute('y2', margin.top + height);
            xAxis.setAttribute('stroke', '#333');
            xAxis.setAttribute('stroke-width', '3');
            svg.appendChild(xAxis);
            
            const yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            yAxis.setAttribute('x1', margin.left);
            yAxis.setAttribute('y1', margin.top);
            yAxis.setAttribute('x2', margin.left);
            yAxis.setAttribute('y2', margin.top + height);
            yAxis.setAttribute('stroke', '#333');
            yAxis.setAttribute('stroke-width', '3');
            svg.appendChild(yAxis);
            
            // X-axis labels
            for (let year = 1955; year <= 2030; year += 5) {
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', xScale(year));
                text.setAttribute('y', margin.top + height + 25);
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('class', 'axis-label');
                text.textContent = year;
                svg.appendChild(text);
            }
            
            // Y-axis labels
            for (let co2 = 280; co2 <= 440; co2 += 20) {
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', margin.left - 15);
                text.setAttribute('y', yScale(co2) + 6);
                text.setAttribute('text-anchor', 'end');
                text.setAttribute('class', 'axis-label');
                text.textContent = co2;
                svg.appendChild(text);
            }
            
            // Axis titles
            const xTitle = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            xTitle.setAttribute('x', margin.left + width/2);
            xTitle.setAttribute('y', margin.top + height + 60);
            xTitle.setAttribute('text-anchor', 'middle');
            xTitle.setAttribute('class', 'axis-title');
            xTitle.textContent = 'Year';
            svg.appendChild(xTitle);
            
            const yTitle = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            yTitle.setAttribute('x', 30);
            yTitle.setAttribute('y', margin.top + height/2);
            yTitle.setAttribute('text-anchor', 'middle');
            yTitle.setAttribute('class', 'axis-title');
            yTitle.setAttribute('transform', `rotate(-90, 30, ${margin.top + height/2})`);
            yTitle.textContent = 'Atmospheric CO₂ (ppm)';
            svg.appendChild(yTitle);
        }

        function addBirthMarker() {
            if (!userBirthYear || !userBirthMonth || !userBirthCO2) return;
            
            const svg = document.getElementById('co2Chart');
            const margin = {top: 20, right: 30, bottom: 80, left: 100};
            const width = 800 - margin.left - margin.right;
            const height = 700 - margin.top - margin.bottom;
            
            // Calculate scales
            const xMin = 1955;
            const xMax = 2030;
            const yMin = 275;
            const yMax = 440;
            
            const xScale = (x) => margin.left + ((x - xMin) / (xMax - xMin)) * width;
            const yScale = (y) => height + margin.top - ((y - yMin) / (yMax - yMin)) * height;
            
            // Remove existing birth marker
            const existingMarker = svg.querySelector('.birth-marker');
            if (existingMarker) existingMarker.remove();
            
            // Add birth marker
            const birthX = userBirthYear + (userBirthMonth - 1) / 12;
            const marker = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            marker.setAttribute('cx', xScale(birthX));
            marker.setAttribute('cy', yScale(userBirthCO2));
            marker.setAttribute('r', '8');
            marker.setAttribute('class', 'birth-marker');
            
            const tooltip = document.getElementById('tooltip');
            marker.addEventListener('mouseenter', (e) => {
                const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                                 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                tooltip.innerHTML = `Your Birth: ${monthNames[userBirthMonth-1]} ${userBirthYear}: ${userBirthCO2.toFixed(2)} ppm`;
                tooltip.style.display = 'block';
                tooltip.style.left = (e.pageX + 10) + 'px';
                tooltip.style.top = (e.pageY - 10) + 'px';
            });
            
            marker.addEventListener('mouseleave', () => {
                tooltip.style.display = 'none';
            });
            
            svg.appendChild(marker);
        }

        function calculateCO2Age() {
            const birthYear = parseInt(document.getElementById('birthYear').value);
            const birthMonth = parseInt(document.getElementById('birthMonth').value);
            
            // Get CO2 values
            const birthCO2 = co2Data[birthYear][birthMonth - 1];
            const currentCO2 = co2Data[2025][6]; // July 2025 (index 6)
            const totalIncrease = currentCO2 - birthCO2;
            const percentIncrease = ((currentCO2 - birthCO2) / birthCO2 * 100);
            
            // Determine data source and show appropriate banners
            const specialNote = document.getElementById('specialNote');
            const iceCoreBanner = document.getElementById('iceCoreBanner');
            const birthLabel = document.getElementById('birthLabel');
            
            if (birthYear >= 1900 && birthYear <= 1957) {
                // Ice core data
                specialNote.style.display = 'none';
                iceCoreBanner.style.display = 'block';
                birthLabel.innerHTML = 'CO<sub>2</sub> at Birth (ppm) - Ice Core Data';
            } else if (birthYear < 1900) {
                // Before available records
                specialNote.style.display = 'block';
                iceCoreBanner.style.display = 'block';
                birthLabel.innerHTML = 'Earliest Available Record (1900)';
            } else {
                // Mauna Loa data (1958 onwards)
                specialNote.style.display = 'none';
                iceCoreBanner.style.display = 'none';
                birthLabel.innerHTML = 'CO<sub>2</sub> at Birth (ppm)';
            }
            
            // Update all display elements
            document.getElementById('birthCO2Display').textContent = birthCO2.toFixed(1);
            document.getElementById('currentCO2Display').textContent = currentCO2.toFixed(1);
            document.getElementById('totalIncreaseDisplay').textContent = '+' + totalIncrease.toFixed(1);
            document.getElementById('increasePercentDisplay').textContent = '+' + percentIncrease.toFixed(1) + '%';
            
            // Update CO2 Age Banner - this should show the total increase, not birth CO2
            document.getElementById('co2AgeValue').textContent = '+' + totalIncrease.toFixed(1) + ' ppm';
            document.getElementById('co2AgeBanner').style.display = 'block';
            
            // Store user data for chart
            userBirthYear = birthYear;
            userBirthMonth = birthMonth;
            userBirthCO2 = birthCO2;
            
            // Show results
            document.getElementById('results').style.display = 'block';
            
            // Add birth marker to chart
            addBirthMarker();
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        // Initialize scatter plot on page load
        document.addEventListener('DOMContentLoaded', function() {
            createScatterPlot();
        });
    </script>
</body>
</html>
